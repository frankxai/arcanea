<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mountain Builder - Arcanea Idle</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    <style>
        :root {
            --earth-primary: #8d6e63;
            --earth-dark: #5d4037;
            --gold-light: #ffd700;
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-elevated: #1a1a28;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-dark); color: var(--text-primary); min-height: 100vh; overflow: hidden; touch-action: none; }
        .game-header { position: fixed; top: 0; left: 0; right: 0; height: 60px; background: var(--bg-card); z-index: 100; display: flex; align-items: center; justify-content: space-between; padding: 0 1rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .back-btn { width: 40px; height: 40px; border-radius: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: var(--text-secondary); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.25rem; }
        .game-title { font-family: 'Cinzel', serif; font-size: 1.25rem; background: linear-gradient(135deg, var(--earth-primary), var(--gold-light)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .stat-pill { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: rgba(255,255,255,0.05); border-radius: 20px; font-size: 0.875rem; }
        .stat-value { font-weight: 600; color: var(--gold-light); }
        .resource-panel { position: fixed; top: 70px; left: 10px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1rem; z-index: 40; min-width: 150px; }
        .resource-row { display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.875rem; }
        .building-item { background: var(--bg-elevated); border-radius: 10px; padding: 0.75rem; margin-bottom: 0.5rem; border: 1px solid rgba(255,255,255,0.1); cursor: pointer; }
        .building-item:hover { border-color: var(--earth-primary); }
        .click-area { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); width: 120px; height: 120px; background: radial-gradient(circle, rgba(141,110,99,0.3) 0%, transparent 70%); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 30; }
        .click-icon { font-size: 3rem; }
        .agent-panel { position: fixed; bottom: 20px; left: 20px; right: 20px; background: var(--bg-card); border: 2px solid var(--earth-primary); border-radius: 16px; padding: 1rem; z-index: 50; display: none; }
        .agent-panel.active { display: block; }
        #game-container { position: fixed; top: 60px; left: 0; right: 0; bottom: 0; }
    </style>
</head>
<body>
    <header class="game-header">
        <div style="display:flex;align-items:center;gap:0.75rem">
            <button class="back-btn" onclick="goBack()">‚Üê</button>
            <div class="game-title">‚õ∞Ô∏è Mountain Builder</div>
        </div>
        <div style="display:flex;align-items:center;gap:1rem">
            <div class="stat-pill"><span>‚≠ê</span><span class="stat-value" id="xpDisplay">0</span></div>
            <div class="stat-pill"><span>‚õèÔ∏è</span><span class="stat-value" id="levelDisplay">1</span></div>
        </div>
    </header>
    <div class="resource-panel">
        <div style="font-family:'Cinzel',serif;font-size:0.875rem;color:var(--earth-primary);margin-bottom:0.75rem">Resources</div>
        <div class="resource-row"><span>ü™® Ore</span><span id="oreValue">0</span></div>
        <div style="font-size:0.75rem;color:var(--text-secondary)" id="oreRate">+0/sec</div>
        <div class="resource-row" style="margin-top:0.5rem"><span>‚öôÔ∏è Metal</span><span id="metalValue">0</span></div>
        <div style="font-size:0.75rem;color:var(--text-secondary)" id="metalRate">+0/sec</div>
        <div style="margin-top:1rem">
            <div class="building-item" onclick="buyBuilding('mine')">‚õèÔ∏è Mine (<span id="count-mine">0</span>) - 10 ore</div>
            <div class="building-item" onclick="buyBuilding('smelter')">üî• Smelter (<span id="count-smelter">0</span>) - 50 ore</div>
        </div>
    </div>
    <div class="click-area" onclick="manualMine()"><div class="click-icon">‚õèÔ∏è</div></div>
    <div id="game-container"></div>
    <div class="agent-panel" id="agentPanel">
        <div style="display:flex;align-items:center;gap:0.75rem;margin-bottom:0.75rem">
            <div style="width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--earth-primary),var(--gold-light));display:flex;align-items:center;justify-content:center;font-size:1.25rem">‚õ∞Ô∏è</div>
            <div><div style="font-weight:600;color:var(--earth-primary)">Mountain-Builder</div><div style="font-size:0.75rem;color:var(--text-secondary)">The Eternal Craftsman</div></div>
        </div>
        <div id="agentMessage" style="color:var(--text-secondary);line-height:1.5">Welcome! Click to mine or buy auto-miners.</div>
    </div>
    <script>
        const GameState = { xp: 0, level: 1, ore: 0, metal: 0, mines: 0, smelters: 0 };
        function updateDisplay() {
            document.getElementById('oreValue').textContent = Math.floor(GameState.ore);
            document.getElementById('metalValue').textContent = Math.floor(GameState.metal);
            document.getElementById('count-mine').textContent = GameState.mines;
            document.getElementById('count-smelter').textContent = GameState.smelters;
            document.getElementById('oreRate').textContent = '+' + GameState.mines + '/sec';
            document.getElementById('metalRate').textContent = '+' + (GameState.smelters * 0.5).toFixed(1) + '/sec';
            document.getElementById('xpDisplay').textContent = GameState.xp;
            document.getElementById('levelDisplay').textContent = GameState.level;
        }
        function manualMine() {
            GameState.ore += 1;
            updateDisplay();
        }
        function buyBuilding(type) {
            if (type === 'mine' && GameState.ore >= 10) {
                GameState.ore -= 10;
                GameState.mines++;
                GameState.xp += 10;
            } else if (type === 'smelter' && GameState.ore >= 50) {
                GameState.ore -= 50;
                GameState.smelters++;
                GameState.xp += 25;
            }
            updateDisplay();
        }
        setInterval(() => {
            GameState.ore += GameState.mines;
            if (GameState.ore > 0 && GameState.smelters > 0) {
                const convert = Math.min(GameState.ore, GameState.smelters * 0.5);
                GameState.ore -= convert;
                GameState.metal += convert * 0.1;
            }
            updateDisplay();
        }, 1000);
        function showAgentMessage(msg) {
            document.getElementById('agentMessage').textContent = msg;
            document.getElementById('agentPanel').classList.add('active');
            setTimeout(() => document.getElementById('agentPanel').classList.remove('active'), 4000);
        }
        function goBack() { window.location.href = '../games-v2.html'; }
        showAgentMessage('Welcome to your mountain! Mine resources and build your civilization.');
        updateDisplay();
    </script>
</body>
</html>
