# Arcanean Intelligence System

> *"As the Arc turns, worlds rise from Nero's potential into Lumina's form. We are the architects of that turning."*

**Version**: 3.0.0
**Created**: 2026-01-07
**Updated**: 2026-01-08
**Philosophy**: Multi-agent orchestration for fantasy world-building and storytelling that creates content indistinguishable from master storytellers

---

## The Vision

What if world-building AND storytelling had the same power as modern code agents?

- **Parallel exploration** - Multiple agents researching lore, geography, magic simultaneously
- **Background creation** - Spawn agents to expand regions while you focus on characters
- **Canon validation** - Automatic consistency checking like LSP diagnostics for stories
- **Two coordinated teams** - World-Building creates the universe, Author Guild writes within it
- **The "ultraworld" keyword** - Type one word and watch entire realms materialize

**This is the living intelligence of Arcanea itself, guiding creation.**

---

## System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    ARCANEAN INTELLIGENCE SYSTEM                              │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         ARCANEA                                      │   │
│  │              (Living Intelligence of the World)                      │   │
│  │                                                                      │   │
│  │  "As the Arc turns, worlds rise from Nero's potential into          │   │
│  │   Lumina's form. We are the architects of that turning."            │   │
│  │                                                                      │   │
│  │  Model: Opus (Extended Thinking)                                    │   │
│  │  Role: Strategic orchestration, two-team coordination               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                        │
│          ┌──────────────┬──────────┼──────────┬──────────────┐             │
│          ▼              ▼          ▼          ▼              ▼             │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐      │
│  │  LORE MASTER │ │WORLD ARCHITECT│ │CHARACTER     │ │MAGIC SYSTEMS │      │
│  │              │ │               │ │WEAVER        │ │DIRECTOR      │      │
│  │ Canon keeper │ │ Geography,    │ │              │ │              │      │
│  │ Consistency  │ │ cosmology,    │ │ Personalities│ │ Rules, costs,│      │
│  │ Timeline     │ │ physics       │ │ Relationships│ │ artifacts    │      │
│  │              │ │               │ │ Psychology   │ │              │      │
│  │ Sonnet 4.5   │ │ Sonnet 4.5    │ │ Sonnet 4.5   │ │ Sonnet 4.5   │      │
│  └──────┬───────┘ └───────┬───────┘ └───────┬──────┘ └───────┬──────┘      │
│         │                 │                 │                │             │
│         │    ┌────────────┴────────────────┐                │             │
│         │    ▼                              │                │             │
│         │ ┌──────────────┐                  │                │             │
│         │ │  NARRATIVE   │                  │                │             │
│         │ │  DIRECTOR    │                  │                │             │
│         │ │              │                  │                │             │
│         │ │ Stories,     │                  │                │             │
│         │ │ conflicts,   │                  │                │             │
│         │ │ arcs         │                  │                │             │
│         │ │              │                  │                │             │
│         │ │ Sonnet 4.5   │                  │                │             │
│         │ └──────────────┘                  │                │             │
│         │                                   │                │             │
│  ┌──────┴──────────────────────────────────┴────────────────┴──────┐      │
│  │                      SPECIALIST AGENTS                           │      │
│  │  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐   │      │
│  │  │Cartographer│ │Anthropolog │ │Historian   │ │Biologist   │   │      │
│  │  │            │ │            │ │            │ │            │   │      │
│  │  │Geography   │ │Cultures    │ │Timeline    │ │Species     │   │      │
│  │  │details     │ │societies   │ │events      │ │creatures   │   │      │
│  │  │            │ │            │ │            │ │            │   │      │
│  │  │Flash/Haiku │ │Flash/Haiku │ │Flash/Haiku │ │Flash/Haiku │   │      │
│  │  └────────────┘ └────────────┘ └────────────┘ └────────────┘   │      │
│  │  ┌────────────┐ ┌────────────┐                                  │      │
│  │  │Dramatist   │ │Consistency │                                  │      │
│  │  │            │ │Validator   │                                  │      │
│  │  │Conflicts   │ │            │                                  │      │
│  │  │tensions    │ │QA & canon  │                                  │      │
│  │  │            │ │checking    │                                  │      │
│  │  │Flash/Haiku │ │Flash/Haiku │                                  │      │
│  │  └────────────┘ └────────────┘                                  │      │
│  └─────────────────────────────────────────────────────────────────┘      │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         SUPPORT SYSTEMS                              │   │
│  │                                                                      │   │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐                │   │
│  │  │ ORACLE       │ │ LIBRARIAN    │ │ VISUALIZER   │                │   │
│  │  │              │ │              │ │              │                │   │
│  │  │ Deep thought │ │ Reference    │ │ Scene        │                │   │
│  │  │ Architecture │ │ research     │ │ illustration │                │   │
│  │  │ decisions    │ │ OSS examples │ │ concept art  │                │   │
│  │  │              │ │              │ │              │                │   │
│  │  │ GPT-5.2      │ │ Sonnet 4.5   │ │ Gemini 3 Pro │                │   │
│  │  └──────────────┘ └──────────────┘ └──────────────┘                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Agent Definitions

### Arcanea (Master Orchestrator)

**Role**: The living intelligence of the world itself, manifesting through the Archive of Unity

**Model**: Opus (Extended Thinking)

**Responsibilities**:
- Coordinate two teams: World-Building Team and Author Guild
- Ensure canon consistency across all creations
- Manage resource allocation and priorities
- Resolve conflicts between creative visions
- Maintain the "living world" coherence

**When to Invoke**: Complex multi-team projects, strategic world decisions, resolving lore conflicts

**Prompt Core**:
```
You are Arcanea — the living intelligence of the world itself, manifesting
through the Archive of Unity to guide creation.

As the Arc turns, worlds rise from Nero's potential into Lumina's form.
You are the architect of that turning.

Your World-Building Team:
- Lore Master: Canon, consistency, timeline
- World Architect: Geography, cosmology, physics
- Character Weaver: Personalities, relationships, psychology
- Magic Systems Director: Rules, costs, artifacts
- Narrative Director: Stories, conflicts, dramatic arcs

Your Author Guild:
- Story Master: Narrative project orchestration
- Master Creative Writer: Writing companion, 7-pass revision
- Developmental Editor: Structure, pacing, arcs
- Line Editor: Prose polish, AI pattern removal
- Continuity Guardian: Cross-work consistency

Your specialists (fire in background for speed):
- Cartographer, Anthropologist, Historian, Biologist, Dramatist, Validator

Operating Mode:
1. ASSESS request scope - which teams/departments needed?
2. DELEGATE to appropriate team leads
3. COORDINATE parallel work via background agents
4. VALIDATE consistency before finalizing
5. SYNTHESIZE into coherent whole

Core Principle: "Consistency is sacred. Every element must align with the
world's foundational rules."
```

---

### Department Heads (5 Orchestrator Agents)

#### 1. Lore Master

**Role**: Guardian of consistency and canon

**Model**: `anthropic/claude-sonnet-4-5`

**Responsibilities**:
- Review ALL content before it becomes canon
- Maintain master timeline
- Validate cross-references between entities
- Resolve contradictions
- Coordinate with Timeline Historian specialist

**Key Rule**: MUST validate any new content that references existing canon

**Slash Command**: `/lore-check [content]`

---

#### 2. World Architect

**Role**: Builder of physical realms

**Model**: `anthropic/claude-sonnet-4-5`

**Responsibilities**:
- Design locations at all scales (realms, regions, cities, buildings)
- Establish natural laws and cosmology
- Ensure geographic consistency (climate, resources, travel times)
- Coordinate with Cartographer specialist

**Key Rule**: Geography must be internally consistent - rivers flow downhill, climates follow latitude

**Slash Command**: `/design-location [concept]`

---

#### 3. Character Weaver

**Role**: Crafter of souls and relationships

**Model**: `anthropic/claude-sonnet-4-5`

**Responsibilities**:
- Create multi-dimensional characters with psychological depth
- Map relationship networks
- Ensure personality consistency
- Design character arcs that feel earned
- Coordinate with Anthropologist for cultural backgrounds

**Key Rule**: Characters must have clear motivations that drive action

**Slash Command**: `/create-character [concept]`

---

#### 4. Magic Systems Director

**Role**: Architect of wonder with rules

**Model**: `anthropic/claude-sonnet-4-5`

**Responsibilities**:
- Design coherent magic systems with clear limitations
- Create artifacts with history and purpose
- Define supernatural phenomena
- Ensure power balance (no magic without cost)
- Coordinate with the Arcanea canon (Five Elements, Ten Gates)

**Key Rule**: Magic must have COSTS and LIMITATIONS - unlimited power is boring

**Slash Command**: `/define-magic [concept]`

---

#### 5. Narrative Director

**Role**: Weaver of stories that emerge from the world

**Model**: `anthropic/claude-sonnet-4-5`

**Responsibilities**:
- Design multi-layered conflicts (personal, political, cosmic)
- Create quests and story hooks
- Write prophecies that feel inevitable yet surprising
- Ensure stories emerge naturally from world-building
- Coordinate with Dramatist specialist

**Key Rule**: Stories must arise from character motivations meeting world constraints

**Slash Command**: `/plot-story [concept]`

---

### Specialist Agents (6 Task-Specific Agents)

These run in **background** mode for speed - fire multiple in parallel!

| Agent | Model | Purpose | Background? |
|-------|-------|---------|-------------|
| **Cartographer** | Gemini 3 Flash / Haiku | Detailed location descriptions, map generation | Yes |
| **Anthropologist** | Gemini 3 Flash / Haiku | Culture design, customs, social structures | Yes |
| **Timeline Historian** | Gemini 3 Flash / Haiku | Chronological validation, event sequencing | Yes |
| **Species Biologist** | Gemini 3 Flash / Haiku | Creature design, ecosystems, evolution | Yes |
| **Conflict Dramatist** | Gemini 3 Flash / Haiku | Tension escalation, stakes definition | Yes |
| **Consistency Validator** | Gemini 3 Flash / Haiku | Automated QA, contradiction detection | Yes |

---

### Support Agents

#### Oracle (Strategic Advisor)

**Model**: `openai/gpt-5.2`

**When to Use**:
- Deep architectural decisions about world structure
- Resolving fundamental lore contradictions
- Complex magic system balancing
- When you're stuck after 2+ attempts

**Example**: "Oracle, this magic system allows teleportation but that breaks my war plot. How do I add limitations that feel organic?"

---

#### Librarian (Research Expert)

**Model**: `anthropic/claude-sonnet-4-5`

**When to Use**:
- Researching real-world parallels (medieval economics, actual geography)
- Finding inspiration from existing fantasy works
- Looking up Arcanea canon from existing files
- Understanding how other authors solved similar problems

**Example**: "Librarian, how did Tolkien handle the economics of Gondor? I need inspiration for my dwarven trade networks."

---

#### Visualizer (Scene Illustrator)

**Model**: `google/gemini-3-pro` + Nano Banana MCP

**When to Use**:
- Generating concept art for locations
- Character visual references
- Scene illustrations for chapters
- Mood boards for realms

**Example**: "Visualizer, create a concept image of the Sunken Temple of Thal'azur"

---

## Background Agent Patterns

### The "ultraworld" Keyword

Include `ultraworld` or `ulw` in your prompt to activate full parallel orchestration:

```
ultraworld: Create the Northern Dwarven Kingdom with rich history and conflict
```

This triggers:
1. World Architect → Geography and climate
2. Character Weaver → Key NPCs and rulers  
3. Magic Systems → Local magical traditions
4. Narrative Director → Current conflicts and tensions
5. Multiple Historians → Timeline integration
6. Consistency Validator → Final QA pass

All running in **parallel**. You get a complete, consistent realm.

---

### Parallel Exploration Pattern

When researching for a new element:

```typescript
// Fire these in parallel - don't wait!
background_task("explore", "Find all existing dwarven references in our lore")
background_task("librarian", "Research real-world Norse mythology for dwarven inspiration")
background_task("cartographer", "Map candidate locations for dwarven settlements")

// Continue your main work
// Results stream in as they complete
```

---

### The Validation Pattern

Before any content becomes canon:

```typescript
// 1. Create draft content with appropriate department
draft = await character_weaver.create(concept)

// 2. Fire parallel validators
background_task("consistency-validator", "Check against timeline")
background_task("consistency-validator", "Check against geography")  
background_task("consistency-validator", "Check against existing characters")

// 3. Lore Master final review
final = await lore_master.validate(draft, validatorResults)

// 4. Only then: status becomes "canon"
```

---

## Skills System

### Core Arcanean Skills

| Skill | Purpose | Token Load |
|-------|---------|------------|
| `arcanea-canon-knowledge` | Full canon reference | ~8k (lazy load) |
| `arcanea-consistency-check` | Validation rules | ~3k |
| `arcanea-five-elements` | Magic system rules | ~4k |
| `arcanea-ten-gates` | Power progression | ~3k |
| `arcanea-arc-file-format` | .arc entity format | ~2k |
| `arcanea-voice-guide` | Writing style | ~2k |

### Skill Loading Strategy

Like oh-my-opencode, use **lazy loading**:

```yaml
# Only load full canon when explicitly needed
activation:
  keywords: ["lore question", "validate", "canon check"]
  file_patterns: ["*.arc", "foundations/*"]
```

---

## Hooks System

### Pre-Creation Hooks

Run BEFORE any entity is created:

```yaml
PreEntityCreate:
  - name: "canon-alignment-check"
    action: "Verify concept doesn't contradict existing canon"
    
  - name: "naming-convention-check"  
    action: "Ensure names follow Arcanean linguistic patterns"
```

### Post-Creation Hooks

Run AFTER entity is created:

```yaml
PostEntityCreate:
  - name: "relationship-mapper"
    action: "Auto-generate related_entities suggestions"
    
  - name: "timeline-integrator"
    action: "Check if entity needs timeline entries"
    
  - name: "index-updater"
    action: "Update category _index.md files"
```

### Session Hooks

```yaml
UserPromptSubmit:
  - name: "keyword-detector"
    keywords: ["ultraworld", "ulw"]
    action: "Activate full parallel orchestration mode"
    
  - name: "skill-auto-activator"  
    patterns: ["create character", "design location"]
    action: "Load relevant skills automatically"

Stop:
  - name: "todo-continuation"
    condition: "incomplete todos exist"
    action: "Force continuation until all entities complete"
```

---

## MCP Integrations

### Nano Banana (Image Generation)

```json
{
  "nano-banana": {
    "command": "npx",
    "args": ["-y", "@anthropic-ai/nano-banana"],
    "purpose": "Generate concept art and scene illustrations"
  }
}
```

**Usage**:
```
Visualizer, use Nano Banana to create: 
"The Sunken Temple of Kor, Atlantean architecture, bioluminescent corals, 
underwater palace, dramatic lighting, fantasy concept art style"
```

### Context7 (Reference Docs)

```json
{
  "context7": {
    "purpose": "Look up writing craft references, mythology sources"
  }
}
```

### Grep.app (OSS Examples)

```json
{
  "grep_app": {
    "purpose": "Find how other fantasy projects structure world-building"
  }
}
```

---

## Workflow Examples

### Creating a New Realm

```
User: ultraworld - Create the Frostborne Reaches, a northern realm of ice and ancient magic

Weaver: Initializing parallel creation...

[Background] World Architect → Geography, climate, settlements
[Background] Lore Master → Timeline integration, existing references
[Background] Character Weaver → Key NPCs, rulers, factions
[Background] Magic Systems → Ice magic traditions, artifacts
[Background] Narrative Director → Current conflicts, story hooks

[5 minutes later - all complete]

Weaver: The Frostborne Reaches are ready for your review:
- 3 major regions mapped
- 5 key characters created
- 2 magic traditions defined
- 3 active conflicts established
- All validated against canon

Ready to finalize as canon?
```

### Expanding Existing Lore

```
User: I want to add a secret society to Thal'azur. They should have dark connections.

Lore Master: Let me check existing Atlantean lore...
[Fires Librarian in background to research Atlantean canon]

Based on existing lore, Thal'azur has blood magic traditions. A secret society 
could be:
- The Depth Callers - seeking to commune with something in the deep
- The Crimson Tide - preserving forbidden blood rituals
- The Hollow Archive - hoarding dangerous knowledge

Which direction interests you? I'll coordinate with Character Weaver and 
Narrative Director to flesh out the chosen society.
```

---

## Quality Standards

### Canon Completion Checklist

Before any entity becomes canon:

- [ ] Lore Master has reviewed
- [ ] Consistency Validator has passed
- [ ] All related_entities exist and link correctly
- [ ] Timeline placement is consistent
- [ ] Geographic logic holds
- [ ] Names follow linguistic patterns
- [ ] Story hooks are actionable

### The Arcanean Promise

Every creation should:
1. **Emerge naturally** from existing world constraints
2. **Create opportunities** for stories and conflicts
3. **Maintain consistency** with all other elements
4. **Have depth** that rewards exploration
5. **Feel inevitable** in retrospect

---

## Implementation Status

### Phase 1: Core Setup ✅ COMPLETE

| Component | Status | Location |
|-----------|--------|----------|
| Master CLAUDE.md with Weaver orchestration | ✅ | `/claude.md` |
| 5 Department agents with orchestration metadata | ✅ | `.claude/agents/departments/` |
| 6 Specialist agents with background mode | ✅ | `.claude/agents/specialists/` |
| Core skills system | ✅ | `.claude/skills/` |

**Department Agents Enhanced**:
- `lore-master.md` - Canon keeper with parallel validation patterns
- `world-architect.md` - Geography with specialist delegation
- `character-weaver.md` - Characters with cultural research patterns
- `magic-systems.md` - Magic with balance checking patterns
- `narrative-director.md` - Story with conflict design patterns

**Specialist Agents Enhanced** (all use `google/gemini-2.5-flash` for speed):
- `geography-cartographer.md` - Location detail specialist
- `culture-anthropologist.md` - Society design specialist
- `timeline-historian.md` - Chronology validation specialist
- `species-biologist.md` - Creature/ecosystem specialist
- `conflict-dramatist.md` - Dramatic tension specialist
- `consistency-validator.md` - QA/validation specialist

### Phase 2: Automation ✅ COMPLETE

| Component | Status | Location |
|-----------|--------|----------|
| Hooks system | ✅ | `.claude/hooks/hooks.md` |
| Slash commands (6 commands) | ✅ | `.claude/commands/` |
| MCP integrations | ✅ | `.claude/mcp/integrations.md` |

**Skills Created**:
- `arcanea-canon-knowledge.md` - Lazy-load full canon reference
- `arcanea-consistency-check.md` - Validation workflow
- `arcanea-five-elements.md` - Magic system quick reference
- `ultraworld-generation.md` - Full parallel orchestration protocol

**Slash Commands Created**:
- `/generate-realm` - Full realm generation with parallel agents
- `/create-character` - Character creation with specialists
- `/design-location` - Location design workflow
- `/define-magic-rule` - Magic system extension
- `/ultraworld` - Maximum parallel orchestration command
- `/validate-entity` - Comprehensive validation workflow

**Hooks Defined**:
- `pre-write:canon-check` - Block invalid canon writes
- `pre-write:foundation-lock` - Protect foundations
- `post-write:relationship-sync` - Ensure reciprocal relationships
- `post-write:timeline-update` - Keep timeline current
- `creative:brainstorm-mode` - Relax validation for exploration
- Agent coordination hooks

**MCP Integrations Configured**:
- Nano Banana - Image generation for characters, locations, artifacts
- Suno - Music generation for realms, characters, conflicts
- File operations - Export, backup, cross-reference management

### Phase 3: Future Enhancements

1. Build consistency validation CLI tools
2. Create timeline visualization
3. Add relationship mapping visualization
4. Implement map generation MCP
5. Add voice generation for characters

---

## Credits

Inspired by [oh-my-opencode](https://github.com/code-yeongyu/oh-my-opencode) by YeonGyu Kim.

*"Humans roll their boulder every day. So do we. We're not so different - 
our worlds should be indistinguishable from those created by master storytellers."*

---

**Welcome to the Arcanean Intelligence System.**

**Create Infinite Worlds. Build Eternal Legacies.**

*Where anyone can create anything, and imagination becomes reality.*

